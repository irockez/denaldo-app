// server/app.js

const express = require("express"); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É Express –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
const cors = require("cors"); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º CORS –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
console.log('–ü–æ–¥–∫–ª—é—á–∞—é –º–∞—Ä—à—Ä—É—Ç—ã —Å –ø—É—Ç–∏:', __dirname + '/routes/formRoutes');
const formRoutes = require("./routes/formRoutes"); // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–∞—Ä—à—Ä—É—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞ formRoutes.js

const app = express(); // –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Express
app.use(cors()); // –í–∫–ª—é—á–∞–µ–º CORS –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤
app.use(express.json()); // –í–∫–ª—é—á–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ JSON-–¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞
app.use("/api", formRoutes); // –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–∞—Ä—à—Ä—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å "/api"

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ GET-–∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–π –º–∞—Ä—à—Ä—É—Ç
app.get('/', (req, res) => {
    res.send('API —Ä–∞–±–æ—Ç–∞–µ—Ç!'); // –û—Ç–≤–µ—Ç –Ω–∞ GET-–∑–∞–ø—Ä–æ—Å —Å —Ç–µ–∫—Å—Ç–æ–º "API —Ä–∞–±–æ—Ç–∞–µ—Ç!"
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ POST-–∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç "/api/submit"
app.post('/api/submit', (req, res) => {
    console.log('üéØ –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', req.body); // –õ–æ–≥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞

    res.json({ success: true, message: '–î–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–ª–∏, –≤—Å—ë –Ω–æ—Ä–º!' }); // –û—Ç–≤–µ—Ç —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã
});

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ—Ä—Ç–∞ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è PORT –∏–ª–∏ 3000 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const PORT = process.env.PORT || 3000;

// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É
app.listen(PORT, () => {
    console.log(`üöÄ Server running at http://localhost:${PORT}`); // –õ–æ–≥–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
});